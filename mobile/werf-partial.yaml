version: 1
configVersion: 1

project: android-app-with-backend

artifacts:
  - name: android-build
    dockerfile: Dockerfile.android-build

  - name: backend
    dockerfile: Dockerfile.backend

image:
  android-build:
    from: gradle:6.8.3-jdk11
    artifactType: build

  backend:
    from: openjdk:11
    artifactType: run
    artifacts:
      - name: android-build
        to: /opt/app/apk/

deploy:
  - helmRelease:
      name: backend-release
      namespace: default
      chart: ./chart
      values:
        image:
          repository: "your-docker-repo/backend"
          tag: "latest"